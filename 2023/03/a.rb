#!/usr/bin/env ruby
# vim: ft=ruby noet ts=4 sw=0 sts
# ==============================================================================
# SETUP
# ==============================================================================
require_relative '../../todd'

input = <<-EOF
467..114..
...*......
..35..633.
......#...
617*......
.....+.58.
..592.....
......755.
...$.*....
.664.598..
EOF

input = 'input.txt'.read
GRID  = input.lines.mchars
ans = 0

# ==============================================================================
# CODE
# ==============================================================================
lines = GRID.border(1, '.').mjoin

pos = []
lines.eachi do |row, r|
	pos += row.scan_all(/[0-9]+/).map { |s| [s[0].i, r, s.begin(0), s.end(0)] }
end

pos.each do |num, r, a, b|
	s = ''
	s += lines[r-1][(a-1)..(b)]
	s += lines[r][(a-1)..(b)]
	s += lines[r+1][(a-1)..(b)]
	ans += num if s.gsub(/[\.0-9]/,'').len > 0
end

# ==============================================================================
# END
# ==============================================================================
puts ans.s.bold.yellow
puts 546563.s.bold.green
ans.clipboard unless ans == 0
#submit(ans)

